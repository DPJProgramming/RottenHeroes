<include href="views/header.html"></include>
<div class="container">
    <div class="row">
        <!-- Hero Information -->
        <div class="col-6 bg-light border">
            <h2>{{ @hero.hero_name }}</h2>
            <img src="../img/{{ @hero.image }}" alt="{{ @hero.hero_name }}">
            <p>
                {{ @hero.description }}<br>
                Rating: {{ @hero.rating }}<br>
                Strength: {{ @hero.strength }}<br>
                Intellect: {{ @hero.intellect }}<br>
                Energy: {{ @hero.energy }}<br>
                Speed: {{ @hero.speed }}<br>
                Powers: {{ @hero.powers }}<br>
            </p>
        </div>

        <!-- News Section -->
        <div class="col-6 bg-light border">
            <h2>News</h2>
            <h4>10-15-24</h4>
            <p>Homelander rescues a group of school children from a collapsing building. His actions are praised, but some question his motives.<br>
                Homelander's recent interview where he emphasized the need for stronger enforcement of superhero regulations.<hr>
            </p>
            <h4>12-2-24</h4>
            <p>Homelander uses his laser eyes to disperse a crowd during a protest. The incident sparks controversy and debates about his methods.<br>
                Critics argue that his actions were excessive and violated civil rights.<br>
                Supporters claim it was necessary to maintain order.<hr>
            </p>
        </div>

        <!-- Blog Section -->
        <div class="col-6 bg-light border">
            <h2>Blog</h2>
            <check if="{{@isHero}}">
            <form method="post" action="/328/RottenHeroes/blog">
                <input type="hidden" name="hero_id" value="{{ @heroId }}">
                <div class="mb-3">
                    <label for="comment" class="form-label">Post to Blog:</label>
                    <textarea class="form-control" id="post-blog" name="blog" rows="3" required></textarea>
                </div>
                <check if="{{ @errors.comment }}">
                    <p class="text-danger">{{ @errors.comment }}</p>
                </check>
                <button type="submit" class="btn btn-primary">Post</button>
            </form>
            </check>


            <div id="blog" class="mt-4">
                <repeat group="{{ @blog }}" value="{{ @blog }}">
                    <div class="comment mb-3">
                        <h4>{{ @blog.userName }} <small>{{ @blog.created_at }}</small></h4>
                        <p>{{ @blog.body }}</p>
                        <hr>
                    </div>
                </repeat>
            </div>
        </div>

        <!-- Comments and Reviews -->
        <div class="col-6 bg-light border">
            <h5>Comments and Reviews</h5>
            <form method="post" action="/328/RottenHeroes/submit-comment">
                <input type="hidden" name="hero_id" value="{{ @heroId }}">
                <div class="mb-3">
                    <label for="comment" class="form-label">Comment:</label>
                    <textarea class="form-control" id="comment" name="comment" rows="3" required></textarea>
                </div>
                <check if="{{ @errors.comment }}">
                    <p class="text-danger">{{ @errors.comment }}</p>
                </check>
                <button type="submit" class="btn btn-primary">Submit</button>
            </form>
            <check if="!@SESSION.user_id">
                <p class="text-danger">You must be logged in to leave a comment. <a href="{{ @BASE }}/login">Log in here</a>.</p>
            </check>

            <div id="comments" class="mt-4">
                <repeat group="{{ @comments }}" value="{{ @comment }}">
                    <div class="comment mb-3">
                        <h4>{{ @comment.userName }} <small>{{ @comment.created_at }}</small></h4>
                        <p>{{ @comment.body }}</p>
                        <hr>
                    </div>
                </repeat>
            </div>
        </div>
    </div>
</div>
</body>
</html>
